<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 30%, #fecfef 70%, #ff9a9e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow-x: hidden;
            position: relative;
        }

        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .floating-heart {
            position: absolute;
            font-size: 1.5rem;
            color: #ff69b4;
            animation: floatHeart 8s linear infinite;
            opacity: 0.7;
        }

        @keyframes floatHeart {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.7;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            padding: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            width: 90%;
            text-align: center;
            position: relative;
            z-index: 10;
            border: 3px solid #ff69b4;
        }

        .game-title {
            color: #d63384;
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { 
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1), 0 0 10px #ff69b4; 
            }
            to { 
                text-shadow: 2px 2px 4px rgba(0,0,0,0.1), 0 0 20px #ff1493, 0 0 30px #ff1493; 
            }
        }

        .game-subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .challenge-card {
            background: linear-gradient(145deg, #fff, #f8f9fa);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid #ff69b4;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .challenge-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 105, 180, 0.1), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            50% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            100% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        }

        .challenge-text {
            font-size: 1.4rem;
            color: #333;
            font-weight: bold;
            line-height: 1.6;
            position: relative;
            z-index: 2;
        }

        .challenge-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .buttons-container {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin: 2rem 0;
        }

        .btn {
            background: linear-gradient(145deg, #ff69b4, #ff1493);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 20, 147, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
        }

        .btn:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: linear-gradient(145deg, #6c757d, #495057);
            box-shadow: 0 5px 15px rgba(108, 117, 125, 0.3);
        }

        .btn-secondary:hover {
            box-shadow: 0 8px 25px rgba(108, 117, 125, 0.4);
        }

        .btn-success {
            background: linear-gradient(145deg, #28a745, #20c997);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        .btn-success:hover {
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
        }

        .score-container {
            display: flex;
            justify-content: space-around;
            margin: 2rem 0;
            background: rgba(255, 182, 193, 0.2);
            padding: 1rem;
            border-radius: 15px;
            border: 2px solid #ffb6c1;
        }

        .score-item {
            text-align: center;
        }

        .score-label {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .score-value {
            color: #d63384;
            font-size: 2rem;
            font-weight: bold;
        }

        .timer {
            font-size: 1.5rem;
            color: #ff1493;
            font-weight: bold;
            margin: 1rem 0;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .celebration {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ff69b4;
            animation: confetti-fall 3s linear infinite;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }

        .instructions {
            background: rgba(255, 240, 245, 0.8);
            padding: 1.5rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 2px solid #ffb6c1;
        }

        .instructions h3 {
            color: #d63384;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .instructions ul {
            text-align: right;
            color: #666;
            line-height: 1.8;
        }

        .instructions li {
            margin-bottom: 0.5rem;
        }

        .hidden {
            display: none;
        }

        .mini-game-section {
            text-align: center;
            margin: 2rem 0;
            padding: 1rem;
            background: rgba(255, 182, 193, 0.1);
            border-radius: 15px;
            border: 2px dashed #ff69b4;
        }

        .heart-game-btn {
            background: linear-gradient(145deg, #ff69b4, #ff1493);
            border: none;
            border-radius: 50%;
            width: 80px;
            height: 80px;
            font-size: 2.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 20, 147, 0.4);
            animation: heartbeat 2s ease-in-out infinite;
        }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .heart-game-btn:hover {
            transform: scale(1.2);
            box-shadow: 0 12px 35px rgba(255, 20, 147, 0.6);
        }

        .heart-game-text {
            color: #d63384;
            font-weight: bold;
            margin-top: 1rem;
            font-size: 1.1rem;
        }

        .mini-game-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 1rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            border: 3px solid #ff69b4;
            width: 95vw;
            max-width: 450px;
            max-height: 95vh;
            overflow: auto;
        }

        .mini-game-header {
            text-align: center;
            margin-bottom: 1rem;
            position: relative;
        }

        .mini-game-header h3 {
            color: #d63384;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .mini-game-header p {
            color: #666;
            font-size: 0.9rem;
        }

        .close-game-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .close-game-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        .game-stats {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 182, 193, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .game-stats span {
            color: #666;
        }

        .game-stats strong {
            color: #d63384;
        }

        .game-canvas-container {
            text-align: center;
        }

        #gameCanvas {
            border: 3px solid #ff69b4;
            border-radius: 15px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f8bbd9 100%);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            height: 250px;
        }

        .game-controls {
            margin-top: 1rem;
        }

        .game-controls p {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .mobile-controls {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 10px;
            max-width: 200px;
            margin: 1rem auto;
            padding: 1rem;
            background: rgba(255, 182, 193, 0.2);
            border-radius: 15px;
        }

        .control-btn {
            background: linear-gradient(145deg, #ff69b4, #ff1493);
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(255, 20, 147, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .control-btn:hover, .control-btn:active {
            transform: scale(0.95);
            box-shadow: 0 2px 8px rgba(255, 20, 147, 0.4);
        }

        .control-btn.empty {
            background: transparent;
            box-shadow: none;
            cursor: default;
        }

        .control-btn.empty:hover, .control-btn.empty:active {
            transform: none;
        }

        .restart-btn {
            background: linear-gradient(145deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
        }

        @media (max-width: 768px) {
            .game-container {
                padding: 1.5rem;
                margin: 1rem;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .challenge-text {
                font-size: 1.2rem;
            }
            
            .btn {
                padding: 12px 20px;
                font-size: 1rem;
            }

            .mini-game-container {
                padding: 1rem;
            }

            #gameCanvas {
                width: 100%;
                max-width: 400px;
                height: auto;
            }

            .heart-game-btn {
                width: 60px;
                height: 60px;
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="floating-hearts" id="floatingHearts"></div>
    
    <div class="game-container">
        <h1 class="game-title">ğŸ’• Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© ğŸ’•</h1>
        <p class="game-subtitle">
            Ù„Ø¹Ø¨Ø© Ù…Ù„ÙŠØ¦Ø© Ø¨Ø§Ù„Ø­Ø¨ ÙˆØ§Ù„Ù…Ø±Ø­! Ø§Ø®ØªØ§Ø±ÙˆØ§ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª ÙˆØ§Ù†ÙØ°ÙˆÙ‡Ø§ Ù…Ø¹Ø§Ù‹ ğŸ’–
        </p>

        <div class="score-container">
            <div class="score-item">
                <div class="score-label">ØªØ­Ø¯ÙŠØ§Øª Ù…Ù†ÙØ°Ø©</div>
                <div class="score-value" id="completedChallenges">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Ø§Ù„Ù†Ù‚Ø§Ø·</div>
                <div class="score-value" id="totalPoints">0</div>
            </div>
        </div>

        <div class="challenge-card" id="challengeCard">
            <div class="challenge-icon">ğŸ¯</div>
            <div class="challenge-text" id="challengeText">
                Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ø§Ø®ØªØ± ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯" Ù„Ø¨Ø¯Ø¡ Ø§Ù„Ù…ØªØ¹Ø© Ø§Ù„Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©! ğŸ’–
            </div>
        </div>

        <div class="timer hidden" id="timer"></div>

        <div class="buttons-container">
            <button class="btn" onclick="getNewChallenge()">
                ğŸ² Ø§Ø®ØªØ± ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯
            </button>
            <button class="btn btn-success hidden" id="completeBtn" onclick="completeChallenge()">
                âœ… ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°
            </button>
            <button class="btn btn-secondary hidden" id="skipBtn" onclick="skipChallenge()">
                â­ï¸ ØªØ®Ø·ÙŠ (Ø¹Ù‚ÙˆØ¨Ø©!)
            </button>
        </div>

        <div class="mini-game-section">
            <button class="heart-game-btn" onclick="toggleMiniGame()">
                ğŸ’–
            </button>
            <p class="heart-game-text">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ù‚Ù„Ø¨ Ù„Ù„Ø¹Ø¨Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©!</p>
        </div>

        <div class="mini-game-container hidden" id="miniGameContainer">
            <div class="mini-game-header">
                <h3>ğŸƒâ€â™‚ï¸ğŸ’• Ù…ØºØ§Ù…Ø±Ø© Ø§Ù„Ø­Ø¨ Ø§Ù„ÙƒØ¨Ø±Ù‰ ğŸ’•ğŸƒâ€â™€ï¸</h3>
                <p>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø³Ù‡Ù… Ø£Ùˆ WASD Ù„Ù„Ø¬Ø±ÙŠ ÙˆØ±Ø§Ø¡ Ø­Ø¨ÙŠØ¨ØªÙƒ!</p>
                <div class="game-stats">
                    <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰: <strong id="gameLevel">1</strong></span>
                    <span>Ø§Ù„Ù†Ù‚Ø§Ø·: <strong id="gameScore">0</strong></span>
                    <span>Ø§Ù„ÙˆÙ‚Øª: <strong id="gameTime">30</strong></span>
                    <span>Ø§Ù„Ø£Ø­Ø¶Ø§Ù†: <strong id="hugCount">0</strong></span>
                </div>
                <button class="close-game-btn" onclick="toggleMiniGame()">âœ–ï¸</button>
            </div>
            <div class="game-canvas-container">
                <canvas id="gameCanvas" width="400" height="250"></canvas>
                <div class="mobile-controls">
                    <div class="control-btn empty"></div>
                    <button class="control-btn" onmousedown="startMove('up')" onmouseup="stopMove('up')" ontouchstart="startMove('up')" ontouchend="stopMove('up')">â†‘</button>
                    <div class="control-btn empty"></div>
                    <button class="control-btn" onmousedown="startMove('left')" onmouseup="stopMove('left')" ontouchstart="startMove('left')" ontouchend="stopMove('left')">â†</button>
                    <div class="control-btn empty"></div>
                    <button class="control-btn" onmousedown="startMove('right')" onmouseup="stopMove('right')" ontouchstart="startMove('right')" ontouchend="stopMove('right')">â†’</button>
                    <div class="control-btn empty"></div>
                    <button class="control-btn" onmousedown="startMove('down')" onmouseup="stopMove('down')" ontouchstart="startMove('down')" ontouchend="stopMove('down')">â†“</button>
                    <div class="control-btn empty"></div>
                </div>
                <div class="game-controls">
                    <p>Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ø§Ù‡ Ø£Ùˆ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ Ù„Ù„Ø­Ø±ÙƒØ©</p>
                    <button class="restart-btn" onclick="restartGame()">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡</button>
                </div>
            </div>
        </div>

        <div class="instructions">
            <h3>ğŸ“‹ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„Ø¹Ø¨Ø©:</h3>
            <ul>
                <li>ğŸ¯ Ø§Ø®ØªØ§Ø±ÙˆØ§ ØªØ­Ø¯ÙŠ Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙˆØ§Ù‚Ø±Ø£ÙˆÙ‡ Ø¨ØµÙˆØª Ø¹Ø§Ù„ÙŠ</li>
                <li>ğŸ’– Ù†ÙØ°ÙˆØ§ Ø§Ù„ØªØ­Ø¯ÙŠ Ù…Ø¹Ø§Ù‹ Ø¨Ø­Ø¨ ÙˆÙ…Ø±Ø­</li>
                <li>â° Ø¨Ø¹Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª Ù„Ù‡Ø§ ÙˆÙ‚Øª Ù…Ø­Ø¯Ø¯</li>
                <li>âœ… Ø§Ø¶ØºØ·ÙˆØ§ "ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°" Ø¨Ø¹Ø¯ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠ</li>
                <li>â­ï¸ Ø¥Ø°Ø§ Ø±ÙØ¶ØªÙ… Ø§Ù„ØªÙ†ÙÙŠØ°ØŒ Ø³ØªØ­ØµÙ„ÙˆÙ† Ø¹Ù„Ù‰ Ø¹Ù‚ÙˆØ¨Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©!</li>
                <li>ğŸ† Ø§Ø¬Ù…Ø¹ÙˆØ§ Ø£ÙƒØ¨Ø± Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ù†Ù‚Ø§Ø·</li>
            </ul>
        </div>
    </div>

    <div class="celebration hidden" id="celebration"></div>

    <script>
        const challenges = [
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¬Ù…Ù„Ø© ØºØ²Ù„ Ù…Ø¨ØªÙƒØ±Ø© Ø¹Ù…Ø±Ùƒ Ù…Ø§ Ù‚Ù„ØªÙ‡Ø§ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ ğŸ’•", icon: "ğŸ’", points: 15 },
            { text: "ØºÙ†ÙŠÙ„ÙŠ Ù…Ù‚Ø·Ø¹ Ù…Ù† Ø£ØºÙ†ÙŠØ© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© ÙˆØ£Ù†Ø§ Ø£ØºÙ…Ø¶ Ø¹ÙŠÙ†ÙŠ ğŸµ", icon: "ğŸ¤", points: 20 },
            { text: "Ø§ÙƒØªØ¨Ù„ÙŠ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ ÙÙŠ Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ø­Ø¯Ø© Ø¨Ø³ âœï¸", icon: "ğŸ’Œ", points: 25, timer: 60 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ 3 Ø£Ø³Ø¨Ø§Ø¨ Ø¨ØªØ­Ø¨Ù†ÙŠ Ø¹Ø´Ø§Ù†Ù‡Ù… Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªÙÙƒØ± ÙƒØªÙŠØ± ğŸ’–", icon: "ğŸ’­", points: 20 },
            { text: "Ø¨ØµÙ„ÙŠ ÙÙŠ Ø¹ÙŠÙ†ÙŠ Ù„Ù…Ø¯Ø© 30 Ø«Ø§Ù†ÙŠØ© Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªØ¶Ø­Ùƒ ğŸ‘€", icon: "ğŸ‘ï¸", points: 15, timer: 30 },
            { text: "Ø§Ø¹Ù…Ù„ÙŠÙ„ÙŠ Ø­Ø¶Ù† Ø¬Ø§Ù…Ø¯ 10 Ø«ÙˆØ§Ù†ÙŠ ğŸ¤—", icon: "ğŸ«‚", points: 15, timer: 10 },
            { text: "Ù‚Ù„Ù‘Ø¯ Ø£ÙˆÙ„ Ù…Ø±Ø© Ø´ÙØªÙ†ÙŠ ÙÙŠÙ‡Ø§ ÙˆØ¹Ø¨Ø±ØªÙ„ÙŠ Ø¹Ù† Ø¥Ø¹Ø¬Ø§Ø¨Ùƒ ğŸ˜", icon: "ğŸ­", points: 25 },
            { text: "Ø§Ø±Ø³Ù…Ù„ÙŠ Ø¨Ø³Ø±Ø¹Ø© Ø±Ø³Ù…Ø© Ø¨ØªØ¹Ø¨Ø± Ø¹Ù†ÙŠ ğŸ¨", icon: "âœï¸", points: 20, timer: 120 },
            { text: "Ø§Ø­ÙƒÙŠÙ„ÙŠ Ù…ÙˆÙ‚Ù Ø­Ø³ÙŠØª ÙÙŠÙ‡ Ø¥Ù†ÙŠ ÙƒÙ†Øª Ø³Ù†Ø¯ Ù„ÙŠÙƒ ğŸ’ª", icon: "ğŸ¤", points: 25 },
            { text: "Ù‚ÙˆÙ„ ÙƒÙ„Ù…Ø© 'Ø¨Ø­Ø¨Ùƒ' Ø¨Ù€3 Ø·Ø±Ù‚ Ù…Ø®ØªÙ„ÙØ© (Ù…Ù…ÙƒÙ† Ø¨Ø§Ù„Ù‡Ù…Ø³ â€“ Ø¨Ø§Ù„Ø¶Ø­Ùƒ â€“ Ø¨Ø§Ù„Ø¬Ø¯) â¤ï¸", icon: "ğŸ’•", points: 20 },
            { text: "Ø§Ø¹ØªØ±ÙÙ„ÙŠ Ø¨Ø³Ø± ØµØºÙŠØ± Ø¹Ù…Ø±Ùƒ Ù…Ø§ Ù‚ÙˆÙ„ØªÙ‡ ğŸ¤«", icon: "ğŸ”", points: 30 },
            { text: "Ø§Ø¨Ø¹ØªÙ„ÙŠ ÙÙˆÙŠØ³ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø¨ÙƒÙ„Ù…Ø© ØºØ±ÙŠØ¨Ø© ÙˆØ£Ù†Ø§ Ø£Ø®Ù…Ù† Ù…Ø¹Ù†Ø§Ù‡Ø§ ğŸ™ï¸", icon: "ğŸ”Š", points: 15 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ù„Ùˆ ÙƒØ§Ù† Ø¹Ù†Ø¯Ùƒ 24 Ø³Ø§Ø¹Ø© Ø¨Ø³ Ù…Ø¹Ø§ÙŠØ§ Ù‡ØªØ¹Ù…Ù„ Ø¥ÙŠÙ‡ â°", icon: "ğŸŒ…", points: 25 },
            { text: "Ø§Ø¹Ù…Ù„ÙŠÙ„ÙŠ Ø­Ø±ÙƒØ© Ø¥ÙŠØ¯ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© (Ø²ÙŠ Ù…Ø³ÙƒØ© Ø¥ÙŠØ¯ Ø£Ùˆ Ù„Ù…Ø³Ø© Ù„Ø·ÙŠÙØ©) ğŸ‘", icon: "ğŸ’–", points: 15 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ ÙˆØ¹Ø¯ ØµØºÙŠØ± Ø¯Ù„ÙˆÙ‚ØªÙŠ ÙˆÙ†ÙØ°Ù‡ Ø®Ù„Ø§Ù„ Ø£Ø³Ø¨ÙˆØ¹ ğŸ¤", icon: "ğŸ’", points: 30 },
            { text: "Ø§Ø­ÙƒÙŠÙ„ÙŠ Ø£ÙƒØªØ± Ø­Ø§Ø¬Ø© Ø®Ù„ØªÙƒ ØªÙØªÙƒØ±Ù†ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© ğŸ’­", icon: "ğŸŒ¸", points: 20 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ù†Ø¯Ø§Ø¡ Ø¯Ù„Ø¹ Ø¬Ø¯ÙŠØ¯ ÙˆØ§Ø®ØªØ±Ø¹Ù„ÙŠ Ø§Ø³Ù… Ø®Ø§Øµ Ø¨ÙŠØ§ ğŸ‘‘", icon: "ğŸ’–", points: 15 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¥ÙŠÙ‡ Ø£ÙˆÙ„ Ø­Ø§Ø¬Ø© Ù„ÙØªØª Ù†Ø¸Ø±Ùƒ ÙÙŠØ§ ÙŠÙˆÙ… Ù…Ø§ Ø§ØªØ¹Ø±ÙÙ†Ø§ âœ¨", icon: "ğŸ‘€", points: 25 },
            { text: "ØµÙÙ†ÙŠ ÙÙŠ 5 ÙƒÙ„Ù…Ø§Øª Ø¨Ø³ ğŸ“", icon: "âœï¸", points: 15, timer: 30 },
            { text: "Ø§Ø¨Ø¹ØªÙ„ÙŠ ØµÙˆØ±Ø© Ù…Ù† Ø¹Ù†Ø¯Ùƒ Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙŠØ§ ğŸ“¸", icon: "ğŸ“·", points: 20 },
            { text: "Ø§ÙƒØªØ¨Ù„ÙŠ Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø´Ø¹Ø± Ù‚ØµÙŠØ± (Ø­ØªÙ‰ Ù„Ùˆ ÙƒÙ„Ù…ØªÙŠÙ† Ù…Ø¶Ø­ÙƒÙŠÙ†) ğŸ“œ", icon: "ğŸ­", points: 25, timer: 90 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ù…ÙØ§Ø¬Ø£Ø© Ø¯Ù„ÙˆÙ‚ØªÙŠ Ù…Ù† ØºÙŠØ± Ù…Ø§ ØªÙ‚ÙˆÙ„ Ø¥ÙŠÙ‡ Ù‡ÙŠ ğŸ", icon: "âœ¨", points: 30 },
            { text: "Ø§Ø­ÙƒÙŠÙ„ÙŠ Ù…ÙˆÙ‚Ù Ù…Ø­Ø±Ø¬ Ø­ØµÙ„Ùƒ Ù…Ø¹Ø§ÙŠØ§ ğŸ˜…", icon: "ğŸ¤­", points: 20 },
            { text: "Ù‚ÙˆÙ„ Ø¬Ù…Ù„Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© ÙˆØ£Ù†Øª Ù…ØºÙ…Ø¶ Ø¹ÙŠÙ†Ùƒ ğŸ’•", icon: "ğŸ‘ï¸", points: 15, timer: 20 },
            { text: "Ø§Ø¹Ù…Ù„ ØªÙ…Ø«ÙŠÙ„ÙŠØ© ØµØºÙŠØ±Ø© ÙƒØ¥Ù†ÙŠ Ø²Ø¹Ù„Øª Ù…Ù†Ùƒ ÙˆØ¥Ù†Øª Ø¨ØªØ­Ø§ÙˆÙ„ ØªØµØ§Ù„Ø­Ù†ÙŠ ğŸ­", icon: "ğŸ˜¢", points: 30 },
            { text: "Ù‚ÙˆÙ„ ÙƒÙ„Ù…Ø© 'ÙˆØ­Ø´ØªÙ†ÙŠ' 5 Ù…Ø±Ø§Øª ÙˆÙƒÙ„ Ù…Ø±Ø© Ø¨Ø·Ø±ÙŠÙ‚Ø© Ù…Ø®ØªÙ„ÙØ© ğŸ’”", icon: "ğŸ˜¢", points: 20 },
            { text: "Ø§Ø¹Ù…Ù„ Ø±Ù†Ø© Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…Ø®ØµÙˆØµØ© Ù…Ø±ØªØ¨Ø·Ø© Ø¨ÙŠØ§ ğŸµ", icon: "ğŸ“±", points: 25 },
            { text: "Ø§Ø¹ØªØ±Ù Ø¨Ø­Ø§Ø¬Ø© ØµØºÙŠØ±Ø© Ø¨ØªØ­Ø¨Ù‡Ø§ ÙÙŠØ§ Ø¨Ø³ Ø¹Ù…Ø±Ùƒ Ù…Ø§ Ù‚Ù„ØªÙ‡Ø§ ğŸ¤«", icon: "ğŸ’", points: 25 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ø®Ø·Ø© Ø®ÙŠØ§Ù„ÙŠØ© Ù„Ø±Ø­Ù„Ø© Ù‡Ø§Ù†Ø±ÙˆØ­Ù‡Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ âœˆï¸", icon: "ğŸŒ", points: 30 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ ÙƒÙ„Ù…Ø© Ø³Ø± Ø¨ÙŠÙ†ÙŠ ÙˆØ¨ÙŠÙ†Ùƒ Ù…Ø­Ø¯Ø´ ÙŠØ¹Ø±ÙÙ‡Ø§ ğŸ”", icon: "ğŸ¤", points: 25 },
            { text: "Ø§Ø±Ø³Ù… Ù‚Ù„Ø¨ Ø¹Ù„Ù‰ Ø¥ÙŠØ¯Ùƒ ÙˆØ¨Ø¹ØªÙ‡Ø§Ù„ÙŠ ØµÙˆØ±Ø© â¤ï¸", icon: "âœ‹", points: 20 },
            { text: "Ø§Ø¹Ù…Ù„ Ø­Ø±ÙƒØ© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø¨Ø§Ù„ÙˆØ´ (Ù†Ø¸Ø±Ø© â€“ Ø§Ø¨ØªØ³Ø§Ù…Ø© â€“ Ø¨ÙˆØ³Ø© Ù‡ÙˆØ§ ğŸ˜‚) ğŸ˜˜", icon: "ğŸ˜", points: 15 },
            { text: "Ø§Ø­ÙƒÙŠÙ„ÙŠ Ø¹Ù† Ø£ÙˆÙ„ Ù…Ø±Ø© Ù‚ÙˆÙ„ØªÙ„ÙŠ 'Ø¨Ø­Ø¨Ùƒ' ğŸ’–", icon: "ğŸ’•", points: 30 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ ÙƒÙ„Ù…Ø© Ø­Ø¨ Ø¨Ù„Ù‡Ø¬Ø© ØºØ±ÙŠØ¨Ø© Ø£Ùˆ Ù„ØºØ© ØªØ§Ù†ÙŠØ© Ù„Ùˆ ØªØ¹Ø±Ù ğŸŒ", icon: "ğŸ—£ï¸", points: 15 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ø£ØºÙ†ÙŠØ© ØµØºÙŠØ±Ø© Ø¯Ù„ÙˆÙ‚ØªÙŠ Ø¨ÙƒÙ„Ø§Ù… Ù…Ù† Ø¹Ù†Ø¯Ùƒ ğŸ¤", icon: "ğŸµ", points: 30, timer: 120 },
            { text: "Ù‚ÙˆÙ„ 3 Ø­Ø§Ø¬Ø§Øª Ù†ÙØ³Ùƒ Ù†Ø¹Ù…Ù„Ù‡Ø§ Ø³ÙˆØ§ ÙÙŠ Ø£Ù‚Ø±Ø¨ ÙˆÙ‚Øª ğŸ“", icon: "ğŸ’­", points: 20 },
            { text: "Ù…Ø«Ù„Ù„ÙŠ Ù…Ø´Ù‡Ø¯ Ù…Ù† ÙÙŠÙ„Ù… Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ ÙŠØ¹Ø¬Ø¨Ùƒ ğŸ¬", icon: "ğŸ­", points: 25 },
            { text: "Ø§Ø¨Ø¹ØªÙ„ÙŠ Ù‚Ù„ÙˆØ¨ ÙƒØªÙŠØ± ÙˆÙƒÙ„ Ù‚Ù„Ø¨ Ø¨Ù…Ø¹Ù†Ù‰ Ù…Ø®ØªÙ„Ù ğŸ’–", icon: "ğŸ’•", points: 15 },
            { text: "Ø§Ø¹Ù…Ù„ÙŠÙ„ÙŠ Ù‚ØµØ© Ù‚ØµÙŠØ±Ø© Ø¹Ù†ÙŠ ÙˆØ¹Ù†Ùƒ ÙƒØ£Ù†Ù†Ø§ Ø£Ø¨Ø·Ø§Ù„ ÙÙŠÙ„Ù… ğŸ“–", icon: "ğŸ‘«", points: 35, timer: 180 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¥ÙŠÙ‡ Ø§Ù„Ø­Ø§Ø¬Ø© Ø§Ù„Ù„ÙŠ Ù…Ù† ØºÙŠØ±Ù‡Ø§ Ù…Ø§ ØªÙ‚Ø¯Ø±Ø´ ØªØ¹ÙŠØ´ Ù…Ø¹Ø§ÙŠØ§ ğŸ’«", icon: "ğŸŒŸ", points: 30 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø£Ø­Ù„Ù‰ Ø°ÙƒØ±Ù‰ Ø¬Ù…Ø¹ØªÙ†Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶ ğŸ“¸", icon: "ğŸ’­", points: 20 },
            { text: "Ø§Ø¹Ù…Ù„ Ø´ÙƒÙ„ Ù‚Ù„Ø¨ Ø¨Ø¥ÙŠØ¯ÙŠÙƒ ÙˆÙ‚ÙˆÙ„Ù„ÙŠ ÙƒÙ„Ù…Ø© Ø­Ø¨ ğŸ’–", icon: "ğŸ‘", points: 10 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¥ÙŠØ´ Ø§Ù„Ù„ÙŠ ÙŠÙ…ÙŠØ²Ù†ÙŠ Ø¹Ù† ÙƒÙ„ Ø§Ù„Ù†Ø§Ø³ ÙÙŠ Ù†Ø¸Ø±Ùƒ ğŸŒŸ", icon: "â­", points: 25 },
            { text: "Ø§Ø¹Ø·ÙŠÙ†ÙŠ Ù‚Ø¨Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¨ÙŠÙ† ÙˆÙ‚ÙˆÙ„Ù„ÙŠ ÙƒÙ„Ù…Ø© Ø­Ù„ÙˆØ© ğŸ˜‡", icon: "ğŸ˜˜", points: 15 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø£ØºÙ†ÙŠØ© ØªÙØªÙƒØ±Ùƒ ÙÙŠØ§ Ù„Ù…Ø§ ØªØ³Ù…Ø¹Ù‡Ø§ ğŸµ", icon: "ğŸ¶", points: 15 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ù…Ø³Ø§Ø¬ Ø¨Ø³ÙŠØ· Ù„Ù„ÙƒØªÙ Ù„Ù…Ø¯Ø© Ø¯Ù‚ÙŠÙ‚Ø© ğŸ’†", icon: "ğŸ§˜", points: 20, timer: 60 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø­Ù„Ù… Ù†ÙØ³Ùƒ Ù†Ø­Ù‚Ù‚Ù‡ Ù…Ø¹ Ø¨Ø¹Ø¶ ğŸ’­", icon: "ğŸŒ™", points: 25 },
            { text: "Ø§Ø¹Ø·ÙŠÙ†ÙŠ Ù„Ù‚Ø¨ Ø­Ù„Ùˆ ÙˆÙ…Ù…ÙŠØ² Ù…Ù† Ø¯Ù„ÙˆÙ‚ØªÙŠ ğŸ‘‘", icon: "ğŸ·ï¸", points: 15 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ ÙƒÙˆÙ…Ø¨Ù„ÙŠÙ…Ù†Øª Ø¹Ù„Ù‰ Ø´ÙƒÙ„ÙŠ Ø§Ù„Ù†Ù‡Ø§Ø±Ø¯Ø© ğŸ’…", icon: "ğŸ’„", points: 10 },
            { text: "Ø§Ø¹Ù…Ù„ Ø¯Ø¹Ø§Ø¡ Ø­Ù„Ùˆ Ù„ÙŠØ§ ğŸ¤²", icon: "ğŸ•Šï¸", points: 25 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¥ÙŠØ´ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ ÙØ®ÙˆØ± ÙÙŠØ§ ğŸ†", icon: "ğŸ¥‡", points: 20 },
            { text: "Ø§Ø¹Ø·ÙŠÙ†ÙŠ Ø¹Ù†Ø§Ù‚ Ù…Ù† Ø§Ù„Ø®Ù„Ù Ù„Ù…Ø¯Ø© 5 Ø«ÙˆØ§Ù†ÙŠ ğŸ«‚", icon: "ğŸ¤—", points: 15, timer: 5 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ ÙƒÙ„Ù…Ø© ØªØ´Ø¬ÙŠØ¹ ÙˆØ­Ø¨ ğŸ’ª", icon: "ğŸ’", points: 15 },
            { text: "Ø§Ø¹Ù…Ù„Ù„ÙŠ Ù…ÙØ§Ø¬Ø£Ø© ØµØºÙŠØ±Ø© Ø¯Ù„ÙˆÙ‚ØªÙŠ (Ø­ØªÙ‰ Ù„Ùˆ Ø¨Ø³ÙŠØ·Ø©) ğŸ", icon: "âœ¨", points: 25 },
            { text: "Ù‚ÙˆÙ„Ù„ÙŠ Ø¥ÙŠØ´ Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙƒ Ù…Ø­Ø¸ÙˆØ¸ Ø¥Ù†Ùƒ Ù…Ø¹Ø§ÙŠØ§ ğŸ€", icon: "ğŸŒˆ", points: 20 }
        ];

        let currentChallenge = null;
        let completedCount = 0;
        let totalPoints = 0;
        let timerInterval = null;

        function createFloatingHearts() {
            const container = document.getElementById('floatingHearts');
            const heart = document.createElement('div');
            heart.className = 'floating-heart';
            heart.innerHTML = ['ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’', 'ğŸ’˜', 'ğŸ’'][Math.floor(Math.random() * 6)];
            heart.style.left = Math.random() * 100 + '%';
            heart.style.animationDelay = Math.random() * 2 + 's';
            heart.style.animationDuration = (Math.random() * 3 + 5) + 's';
            
            container.appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, 8000);
        }

        function getNewChallenge() {
            currentChallenge = challenges[Math.floor(Math.random() * challenges.length)];
            
            document.getElementById('challengeText').textContent = currentChallenge.text;
            document.querySelector('.challenge-icon').textContent = currentChallenge.icon;
            
            document.getElementById('completeBtn').classList.remove('hidden');
            document.getElementById('skipBtn').classList.remove('hidden');
            
            if (currentChallenge.timer) {
                startTimer(currentChallenge.timer);
            } else {
                document.getElementById('timer').classList.add('hidden');
            }
            
            // ØªØ£Ø«ÙŠØ± Ø¨ØµØ±ÙŠ
            const card = document.getElementById('challengeCard');
            card.style.transform = 'scale(0.95)';
            setTimeout(() => {
                card.style.transform = 'scale(1)';
            }, 200);
        }

        function startTimer(seconds) {
            const timerElement = document.getElementById('timer');
            timerElement.classList.remove('hidden');
            
            let timeLeft = seconds;
            timerElement.textContent = `â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timeLeft} Ø«Ø§Ù†ÙŠØ©`;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `â° Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timeLeft} Ø«Ø§Ù†ÙŠØ©`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerElement.textContent = "â° Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª!";
                    timerElement.style.color = '#dc3545';
                }
            }, 1000);
        }

        function completeChallenge() {
            if (!currentChallenge) return;
            
            completedCount++;
            totalPoints += currentChallenge.points;
            
            document.getElementById('completedChallenges').textContent = completedCount;
            document.getElementById('totalPoints').textContent = totalPoints;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ØªØ§ÙŠÙ…Ø±
            document.getElementById('completeBtn').classList.add('hidden');
            document.getElementById('skipBtn').classList.add('hidden');
            document.getElementById('timer').classList.add('hidden');
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„
            createCelebration();
            
            // Ø±Ø³Ø§Ù„Ø© ØªØ´Ø¬ÙŠØ¹ÙŠØ©
            document.getElementById('challengeText').innerHTML = `
                ğŸ‰ Ø£Ø­Ø³Ù†ØªÙ…! Ø­ØµÙ„ØªÙ… Ø¹Ù„Ù‰ ${currentChallenge.points} Ù†Ù‚Ø·Ø©! ğŸ‰<br>
                <small style="color: #666;">Ø§Ø®ØªØ§Ø±ÙˆØ§ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</small>
            `;
            document.querySelector('.challenge-icon').textContent = 'ğŸ†';
            
            currentChallenge = null;
        }

        function skipChallenge() {
            if (!currentChallenge) return;
            
            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ØªØ§ÙŠÙ…Ø±
            document.getElementById('completeBtn').classList.add('hidden');
            document.getElementById('skipBtn').classList.add('hidden');
            document.getElementById('timer').classList.add('hidden');
            
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Ø¹Ù‚ÙˆØ¨Ø§Øª Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            const punishments = [
                "Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø© Ø­Ø¨ Ù…Ù† 5 Ø£Ø³Ø·Ø± Ù„Ø­Ø¨ÙŠØ¨Ùƒ/Ø­Ø¨ÙŠØ¨ØªÙƒ âœï¸ğŸ’•",
                "Ø§Ø¹Ù…Ù„ Ù…ÙØ§Ø¬Ø£Ø© ØµØºÙŠØ±Ø© ÙÙŠ Ø®Ù„Ø§Ù„ Ø§Ù„ÙŠÙˆÙ… ğŸğŸ’–",
                "Ù‚ÙˆÙ„ 10 ÙƒÙˆÙ…Ø¨Ù„ÙŠÙ…Ù†ØªØ§Øª Ù…ØªØªØ§Ù„ÙŠØ© ğŸ’âœ¨",
                "Ø§Ø¹Ø·ÙŠ 20 Ù‚Ø¨Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¯ ğŸ˜˜ğŸ’‹",
                "Ø§Ø¹Ù…Ù„ Ø¥ÙØ·Ø§Ø± Ø£Ùˆ Ø¹Ø´Ø§Ø¡ Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠ ğŸ½ï¸ğŸ’•",
                "Ø§ÙƒØªØ¨ Ù‚ØµÙŠØ¯Ø© Ø¨Ø³ÙŠØ·Ø© (Ø­ØªÙ‰ Ù„Ùˆ 4 Ø£Ø¨ÙŠØ§Øª) ğŸ“ğŸŒ¹",
                "Ø§Ø¹Ø·ÙŠ Ù…Ø³Ø§Ø¬ Ù„Ù…Ø¯Ø© 10 Ø¯Ù‚Ø§Ø¦Ù‚ ğŸ’†â€â™€ï¸ğŸ’–",
                "Ø§Ø¹Ù…Ù„ ÙÙŠØ¯ÙŠÙˆ Ù‚ØµÙŠØ± ØªÙ‚ÙˆÙ„ ÙÙŠÙ‡ ÙƒÙ„Ø§Ù… Ø­Ø¨ ğŸ“±ğŸ’•"
            ];
            
            const punishment = punishments[Math.floor(Math.random() * punishments.length)];
            
            document.getElementById('challengeText').innerHTML = `
                ğŸ˜… Ø¹Ù‚ÙˆØ¨Ø© Ø±ÙˆÙ…Ø§Ù†Ø³ÙŠØ©! ğŸ’•<br>
                <strong>${punishment}</strong><br>
                <small style="color: #666;">Ù†ÙØ° Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø© ÙˆØ§Ø®ØªØ± ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯</small>
            `;
            document.querySelector('.challenge-icon').textContent = 'ğŸ˜ˆ';
            
            currentChallenge = null;
        }

        function createCelebration() {
            const celebration = document.getElementById('celebration');
            celebration.classList.remove('hidden');
            
            // Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆÙ†ÙÙŠØªÙŠ
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.backgroundColor = ['#ff69b4', '#ff1493', '#ffd700', '#ff6347', '#9370db'][Math.floor(Math.random() * 5)];
                    confetti.style.animationDelay = Math.random() * 2 + 's';
                    
                    celebration.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 3000);
                }, i * 50);
            }
            
            setTimeout(() => {
                celebration.classList.add('hidden');
            }, 3000);
        }

        // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù„ÙˆØ¨ Ù…ØªØ­Ø±ÙƒØ© ÙƒÙ„ Ø«Ø§Ù†ÙŠØªÙŠÙ†
        setInterval(createFloatingHearts, 2000);
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ù„ÙˆØ¨ Ø£ÙˆÙ„ÙŠØ©
        for (let i = 0; i < 5; i++) {
            setTimeout(createFloatingHearts, i * 400);
        }

        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù„Ù…ØµØºØ±Ø© Ø§Ù„Ù…Ø·ÙˆØ±Ø©
        let canvas, ctx;
        let gameRunning = false;
        let player = { x: 50, y: 125, size: 40, speed: 4, trail: [] };
        let beloved = { x: 300, y: 125, size: 40, speed: 2.5, trail: [] };
        let keys = {};
        let gameState = 'playing'; // 'playing', 'caught', 'hugging', 'levelComplete'
        let hugTimer = 0;
        let hearts = [];
        let particles = [];
        let obstacles = [];
        let powerUps = [];
        let mobileControls = { up: false, down: false, left: false, right: false };
        let gameLevel = 1;
        let gameScore = 0;
        let hugCount = 0;
        let timeLeft = 30;
        let gameTimer = null;
        let backgroundStars = [];
        let cameraShake = 0;

        function toggleMiniGame() {
            const container = document.getElementById('miniGameContainer');
            const isHidden = container.classList.contains('hidden');
            
            if (isHidden) {
                container.classList.remove('hidden');
                initMiniGame();
            } else {
                container.classList.add('hidden');
                gameRunning = false;
            }
        }

        function initMiniGame() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            gameRunning = true;
            gameState = 'playing';
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
            player = { x: 50, y: 125, size: 40, speed: 4, trail: [] };
            beloved = { x: 300, y: 125, size: 40, speed: 2.5, trail: [] };
            hearts = [];
            particles = [];
            obstacles = [];
            powerUps = [];
            backgroundStars = [];
            hugTimer = 0;
            gameLevel = 1;
            gameScore = 0;
            hugCount = 0;
            timeLeft = 30;
            cameraShake = 0;
            mobileControls = { up: false, down: false, left: false, right: false };
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù†Ø¬ÙˆÙ… ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            createBackgroundStars();
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„
            createLevel(gameLevel);
            
            // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
            startGameTimer();
            
            // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            updateGameUI();
            
            // Ø¨Ø¯Ø¡ Ø­Ù„Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
            gameLoop();
            
            // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);
        }

        function startMove(direction) {
            mobileControls[direction] = true;
        }

        function stopMove(direction) {
            mobileControls[direction] = false;
        }

        function handleKeyDown(e) {
            keys[e.key.toLowerCase()] = true;
            keys[e.code] = true;
        }

        function handleKeyUp(e) {
            keys[e.key.toLowerCase()] = false;
            keys[e.code] = false;
        }

        function updateGame() {
            if (gameState === 'hugging') {
                hugTimer++;
                if (hugTimer > 120) { // 2 Ø«Ø§Ù†ÙŠØ©
                    gameState = 'playing';
                    hugTimer = 0;
                    hugCount++;
                    gameScore += 100 * gameLevel;
                    
                    // Ø¥Ø¶Ø§ÙØ© ØªØ£Ø«ÙŠØ± Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                    cameraShake = 10;
                    
                    // Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø²ÙŠØ¦Ø§Øª Ø§Ù„Ø§Ø­ØªÙØ§Ù„
                    createCelebrationParticles();
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø¨ÙŠØ¨Ø© ÙÙŠ Ù…ÙƒØ§Ù† Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                    beloved.x = Math.random() * (canvas.width - beloved.size);
                    beloved.y = Math.random() * (canvas.height - beloved.size);
                    
                    // ÙØ­Øµ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                    if (hugCount >= gameLevel * 3) {
                        levelComplete();
                    }
                    
                    updateGameUI();
                }
                return;
            }

            if (gameState === 'levelComplete') {
                return;
            }

            // ØªØ­Ø¯ÙŠØ« Ø£Ø«Ø± Ø§Ù„Ø­Ø±ÙƒØ©
            updateTrails();

            // Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ (Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ + Ø§Ù„Ù„Ù…Ø³)
            let moved = false;
            if (keys['arrowleft'] || keys['a'] || mobileControls.left) {
                player.x = Math.max(0, player.x - player.speed);
                moved = true;
            }
            if (keys['arrowright'] || keys['d'] || mobileControls.right) {
                player.x = Math.min(canvas.width - player.size, player.x + player.speed);
                moved = true;
            }
            if (keys['arrowup'] || keys['w'] || mobileControls.up) {
                player.y = Math.max(0, player.y - player.speed);
                moved = true;
            }
            if (keys['arrowdown'] || keys['s'] || mobileControls.down) {
                player.y = Math.min(canvas.height - player.size, player.y + player.speed);
                moved = true;
            }

            // ÙØ­Øµ Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù… Ù…Ø¹ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
            checkObstacleCollision();

            // ÙØ­Øµ Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù… Ù…Ø¹ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø®Ø§ØµØ©
            checkPowerUpCollision();

            // Ø­Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            if (gameState === 'playing') {
                updateBelovedAI();

                // ÙØ­Øµ Ø§Ù„Ø§ØµØ·Ø¯Ø§Ù… Ù„Ù„Ø§Ø­ØªØ¶Ø§Ù†
                const dx = player.x - beloved.x;
                const dy = player.y - beloved.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 30) {
                    gameState = 'hugging';
                    hugTimer = 0;
                    createGameHearts();
                }
            }

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª ÙˆØ§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª
            updateParticles();
            updateHearts();
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            if (cameraShake > 0) {
                cameraShake--;
            }
        }

        function createGameHearts() {
            for (let i = 0; i < 15; i++) {
                hearts.push({
                    x: player.x + Math.random() * 60 - 30,
                    y: player.y + Math.random() * 60 - 30,
                    speed: Math.random() * 3 + 1,
                    opacity: 1,
                    size: Math.random() * 20 + 15,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10
                });
            }
        }

        function createBackgroundStars() {
            for (let i = 0; i < 30; i++) {
                backgroundStars.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 3 + 1,
                    opacity: Math.random() * 0.5 + 0.3,
                    twinkle: Math.random() * 100
                });
            }
        }

        function createLevel(level) {
            obstacles = [];
            powerUps = [];
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
            const obstacleCount = Math.min(level * 2, 8);
            for (let i = 0; i < obstacleCount; i++) {
                obstacles.push({
                    x: Math.random() * (canvas.width - 40) + 20,
                    y: Math.random() * (canvas.height - 40) + 20,
                    width: 30 + Math.random() * 20,
                    height: 30 + Math.random() * 20,
                    type: Math.random() > 0.5 ? 'rock' : 'flower'
                });
            }
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø®Ø§ØµØ©
            const powerUpCount = Math.max(1, Math.floor(level / 2));
            for (let i = 0; i < powerUpCount; i++) {
                powerUps.push({
                    x: Math.random() * (canvas.width - 30) + 15,
                    y: Math.random() * (canvas.height - 30) + 15,
                    size: 25,
                    type: ['speed', 'magnet', 'time'][Math.floor(Math.random() * 3)],
                    collected: false,
                    pulse: 0
                });
            }
            
            // Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©
            beloved.speed = 2.5 + (level - 1) * 0.3;
        }

        function startGameTimer() {
            if (gameTimer) clearInterval(gameTimer);
            
            gameTimer = setInterval(() => {
                timeLeft--;
                updateGameUI();
                
                if (timeLeft <= 0) {
                    gameOver();
                }
            }, 1000);
        }

        function updateGameUI() {
            document.getElementById('gameLevel').textContent = gameLevel;
            document.getElementById('gameScore').textContent = gameScore;
            document.getElementById('gameTime').textContent = timeLeft;
            document.getElementById('hugCount').textContent = hugCount;
        }

        function levelComplete() {
            gameState = 'levelComplete';
            gameLevel++;
            timeLeft += 20; // ÙˆÙ‚Øª Ø¥Ø¶Ø§ÙÙŠ
            hugCount = 0;
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¬Ø¯ÙŠØ¯
            createLevel(gameLevel);
            
            // ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø­ØªÙØ§Ù„
            createLevelCompleteEffect();
            
            setTimeout(() => {
                gameState = 'playing';
            }, 2000);
        }

        function gameOver() {
            gameRunning = false;
            if (gameTimer) clearInterval(gameTimer);
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 24px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©! ğŸ’”', canvas.width/2, canvas.height/2 - 20);
            
            ctx.font = '16px Arial';
            ctx.fillText(`Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${gameScore}`, canvas.width/2, canvas.height/2 + 20);
        }

        function updateTrails() {
            // Ø£Ø«Ø± Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨
            player.trail.push({ x: player.x + player.size/2, y: player.y + player.size/2, opacity: 1 });
            if (player.trail.length > 10) player.trail.shift();
            
            player.trail.forEach(point => {
                point.opacity -= 0.1;
            });
            
            // Ø£Ø«Ø± Ø­Ø±ÙƒØ© Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©
            beloved.trail.push({ x: beloved.x + beloved.size/2, y: beloved.y + beloved.size/2, opacity: 1 });
            if (beloved.trail.length > 8) beloved.trail.shift();
            
            beloved.trail.forEach(point => {
                point.opacity -= 0.12;
            });
        }

        function updateBelovedAI() {
            const dx = player.x - beloved.x;
            const dy = player.y - beloved.y;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            if (distance < 100) {
                // Ø§Ù„Ù‡Ø±ÙˆØ¨ Ø§Ù„Ø°ÙƒÙŠ - ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
                let escapeX = (dx / distance) * -beloved.speed;
                let escapeY = (dy / distance) * -beloved.speed;
                
                // ÙØ­Øµ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ÙÙŠ Ù…Ø³Ø§Ø± Ø§Ù„Ù‡Ø±ÙˆØ¨
                const futureX = beloved.x + escapeX * 5;
                const futureY = beloved.y + escapeY * 5;
                
                let blocked = false;
                obstacles.forEach(obstacle => {
                    if (futureX < obstacle.x + obstacle.width && 
                        futureX + beloved.size > obstacle.x &&
                        futureY < obstacle.y + obstacle.height && 
                        futureY + beloved.size > obstacle.y) {
                        blocked = true;
                    }
                });
                
                if (blocked) {
                    // ØªØºÙŠÙŠØ± Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ø³Ø¯ÙˆØ¯
                    escapeX = escapeY;
                    escapeY = -escapeX;
                }
                
                beloved.x = Math.max(0, Math.min(canvas.width - beloved.size, beloved.x + escapeX));
                beloved.y = Math.max(0, Math.min(canvas.height - beloved.size, beloved.y + escapeY));
            } else {
                // Ø­Ø±ÙƒØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø£ÙƒØ«Ø± Ø°ÙƒØ§Ø¡Ù‹
                beloved.x += (Math.random() - 0.5) * 3;
                beloved.y += (Math.random() - 0.5) * 3;
                beloved.x = Math.max(0, Math.min(canvas.width - beloved.size, beloved.x));
                beloved.y = Math.max(0, Math.min(canvas.height - beloved.size, beloved.y));
            }
        }

        function checkObstacleCollision() {
            obstacles.forEach(obstacle => {
                if (player.x < obstacle.x + obstacle.width && 
                    player.x + player.size > obstacle.x &&
                    player.y < obstacle.y + obstacle.height && 
                    player.y + player.size > obstacle.y) {
                    
                    // Ø¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ù„Ù„Ø®Ù„Ù
                    if (keys['arrowleft'] || keys['a'] || mobileControls.left) {
                        player.x += player.speed;
                    }
                    if (keys['arrowright'] || keys['d'] || mobileControls.right) {
                        player.x -= player.speed;
                    }
                    if (keys['arrowup'] || keys['w'] || mobileControls.up) {
                        player.y += player.speed;
                    }
                    if (keys['arrowdown'] || keys['s'] || mobileControls.down) {
                        player.y -= player.speed;
                    }
                }
            });
        }

        function checkPowerUpCollision() {
            powerUps.forEach(powerUp => {
                if (!powerUp.collected) {
                    const dx = player.x + player.size/2 - (powerUp.x + powerUp.size/2);
                    const dy = player.y + player.size/2 - (powerUp.y + powerUp.size/2);
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < 25) {
                        powerUp.collected = true;
                        gameScore += 50;
                        
                        switch (powerUp.type) {
                            case 'speed':
                                player.speed = Math.min(8, player.speed + 1);
                                break;
                            case 'magnet':
                                // Ø¬Ø°Ø¨ Ø§Ù„Ø­Ø¨ÙŠØ¨Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹
                                beloved.speed = Math.max(1, beloved.speed - 0.5);
                                break;
                            case 'time':
                                timeLeft += 10;
                                break;
                        }
                        
                        createPowerUpEffect(powerUp.x, powerUp.y);
                        updateGameUI();
                    }
                }
            });
        }

        function updateParticles() {
            particles = particles.filter(particle => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.vy += 0.1; // Ø¬Ø§Ø°Ø¨ÙŠØ©
                particle.opacity -= 0.02;
                particle.size *= 0.99;
                
                return particle.opacity > 0 && particle.size > 0.5;
            });
        }

        function updateHearts() {
            hearts = hearts.filter(heart => {
                heart.y -= heart.speed;
                heart.opacity -= 0.015;
                heart.rotation += heart.rotationSpeed;
                return heart.opacity > 0;
            });
        }

        function createCelebrationParticles() {
            for (let i = 0; i < 20; i++) {
                particles.push({
                    x: player.x + player.size/2,
                    y: player.y + player.size/2,
                    vx: (Math.random() - 0.5) * 8,
                    vy: (Math.random() - 0.5) * 8 - 2,
                    size: Math.random() * 8 + 4,
                    opacity: 1,
                    color: ['#ff69b4', '#ff1493', '#ffd700', '#ff6347'][Math.floor(Math.random() * 4)]
                });
            }
        }

        function createPowerUpEffect(x, y) {
            for (let i = 0; i < 10; i++) {
                particles.push({
                    x: x,
                    y: y,
                    vx: (Math.random() - 0.5) * 6,
                    vy: (Math.random() - 0.5) * 6,
                    size: Math.random() * 6 + 3,
                    opacity: 1,
                    color: '#00ff00'
                });
            }
        }

        function createLevelCompleteEffect() {
            for (let i = 0; i < 50; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: canvas.height,
                    vx: (Math.random() - 0.5) * 4,
                    vy: -Math.random() * 8 - 2,
                    size: Math.random() * 10 + 5,
                    opacity: 1,
                    color: ['#ff69b4', '#ff1493', '#ffd700'][Math.floor(Math.random() * 3)]
                });
            }
        }

        function drawCharacter(x, y, size, type, isHugging = false) {
            const centerX = x + size/2;
            const centerY = y + size/2;
            
            if (type === 'player') {
                // Ø±Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ø°ÙƒØ± (Ø£Ø²Ø±Ù‚)
                // Ø§Ù„Ø¬Ø³Ù…
                ctx.fillStyle = '#4a90e2';
                ctx.fillRect(x + size*0.2, y + size*0.4, size*0.6, size*0.5);
                
                // Ø§Ù„Ø±Ø£Ø³
                ctx.fillStyle = '#fdbcb4';
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.25, size*0.2, 0, Math.PI * 2);
                ctx.fill();
                
                // Ø§Ù„Ø´Ø¹Ø±
                ctx.fillStyle = '#8b4513';
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.2, size*0.22, Math.PI, Math.PI * 2);
                ctx.fill();
                
                // Ø§Ù„Ø¹ÙŠÙˆÙ†
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(centerX - size*0.08, y + size*0.22, size*0.03, 0, Math.PI * 2);
                ctx.arc(centerX + size*0.08, y + size*0.22, size*0.03, 0, Math.PI * 2);
                ctx.fill();
                
                // Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…Ø©
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.28, size*0.08, 0, Math.PI);
                ctx.stroke();
                
                // Ø§Ù„Ø£Ø±Ø¬Ù„
                ctx.fillStyle = '#000080';
                ctx.fillRect(x + size*0.25, y + size*0.9, size*0.2, size*0.1);
                ctx.fillRect(x + size*0.55, y + size*0.9, size*0.2, size*0.1);
                
            } else if (type === 'beloved') {
                // Ø±Ø³Ù… Ø§Ù„ÙØªØ§Ø© (ÙˆØ±Ø¯ÙŠ)
                // Ø§Ù„Ø¬Ø³Ù…
                ctx.fillStyle = isHugging ? '#ff1493' : '#ff69b4';
                ctx.fillRect(x + size*0.2, y + size*0.4, size*0.6, size*0.5);
                
                // Ø§Ù„Ø±Ø£Ø³
                ctx.fillStyle = '#fdbcb4';
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.25, size*0.2, 0, Math.PI * 2);
                ctx.fill();
                
                // Ø§Ù„Ø´Ø¹Ø± Ø§Ù„Ø·ÙˆÙŠÙ„
                ctx.fillStyle = '#daa520';
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.2, size*0.25, Math.PI, Math.PI * 2);
                ctx.fill();
                ctx.fillRect(x + size*0.1, y + size*0.25, size*0.8, size*0.15);
                
                // Ø§Ù„Ø¹ÙŠÙˆÙ† (Ø£ÙƒØ¨Ø± ÙˆØ£Ø¬Ù…Ù„)
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(centerX - size*0.08, y + size*0.22, size*0.04, 0, Math.PI * 2);
                ctx.arc(centerX + size*0.08, y + size*0.22, size*0.04, 0, Math.PI * 2);
                ctx.fill();
                
                // Ø§Ù„Ø±Ù…ÙˆØ´
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 1;
                for(let i = 0; i < 3; i++) {
                    ctx.beginPath();
                    ctx.moveTo(centerX - size*0.08 + i*size*0.02 - size*0.02, y + size*0.18);
                    ctx.lineTo(centerX - size*0.08 + i*size*0.02 - size*0.02, y + size*0.15);
                    ctx.moveTo(centerX + size*0.08 + i*size*0.02 - size*0.02, y + size*0.18);
                    ctx.lineTo(centerX + size*0.08 + i*size*0.02 - size*0.02, y + size*0.15);
                    ctx.stroke();
                }
                
                // Ø§Ù„Ø§Ø¨ØªØ³Ø§Ù…Ø©
                ctx.strokeStyle = '#ff1493';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.arc(centerX, y + size*0.28, size*0.08, 0, Math.PI);
                ctx.stroke();
                
                // Ø§Ù„Ø£Ø±Ø¬Ù„
                ctx.fillStyle = '#ff1493';
                ctx.fillRect(x + size*0.25, y + size*0.9, size*0.2, size*0.1);
                ctx.fillRect(x + size*0.55, y + size*0.9, size*0.2, size*0.1);
            }
        }

        function drawGame() {
            // Ø­ÙØ¸ Ø§Ù„Ø³ÙŠØ§Ù‚ Ù„Ù„Ø§Ù‡ØªØ²Ø§Ø²
            ctx.save();
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù‡ØªØ²Ø§Ø² Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§
            if (cameraShake > 0) {
                const shakeX = (Math.random() - 0.5) * cameraShake;
                const shakeY = (Math.random() - 0.5) * cameraShake;
                ctx.translate(shakeX, shakeY);
            }
            
            // Ù…Ø³Ø­ Ø§Ù„Ø´Ø§Ø´Ø©
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Ø±Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ¯Ø±Ø¬Ø©
            const gradient = ctx.createRadialGradient(canvas.width/2, canvas.height/2, 0, canvas.width/2, canvas.height/2, canvas.width);
            gradient.addColorStop(0, '#e3f2fd');
            gradient.addColorStop(0.5, '#f8bbd9');
            gradient.addColorStop(1, '#e1bee7');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Ø±Ø³Ù… Ø§Ù„Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…ØªÙ„Ø£Ù„Ø¦Ø©
            backgroundStars.forEach(star => {
                star.twinkle += 0.1;
                const twinkleOpacity = star.opacity + Math.sin(star.twinkle) * 0.3;
                
                ctx.save();
                ctx.globalAlpha = Math.max(0, twinkleOpacity);
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });

            // Ø±Ø³Ù… Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚
            obstacles.forEach(obstacle => {
                if (obstacle.type === 'rock') {
                    // Ø±Ø³Ù… ØµØ®Ø±Ø©
                    ctx.fillStyle = '#8d6e63';
                    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                    ctx.fillStyle = '#5d4037';
                    ctx.fillRect(obstacle.x + 2, obstacle.y + 2, obstacle.width - 4, obstacle.height - 4);
                } else {
                    // Ø±Ø³Ù… Ø²Ù‡Ø±Ø©
                    ctx.fillStyle = '#4caf50';
                    ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
                    
                    // Ø¨ØªÙ„Ø§Øª Ø§Ù„Ø²Ù‡Ø±Ø©
                    ctx.fillStyle = '#e91e63';
                    const centerX = obstacle.x + obstacle.width/2;
                    const centerY = obstacle.y + obstacle.height/2;
                    for (let i = 0; i < 6; i++) {
                        const angle = (i * Math.PI * 2) / 6;
                        const petalX = centerX + Math.cos(angle) * 8;
                        const petalY = centerY + Math.sin(angle) * 8;
                        ctx.beginPath();
                        ctx.arc(petalX, petalY, 4, 0, Math.PI * 2);
                        ctx.fill();
                    }
                }
            });

            // Ø±Ø³Ù… Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø®Ø§ØµØ©
            powerUps.forEach(powerUp => {
                if (!powerUp.collected) {
                    powerUp.pulse += 0.2;
                    const pulseSize = powerUp.size + Math.sin(powerUp.pulse) * 5;
                    
                    ctx.save();
                    ctx.globalAlpha = 0.8 + Math.sin(powerUp.pulse) * 0.2;
                    
                    // Ø±Ø³Ù… Ø§Ù„Ù‡Ø§Ù„Ø©
                    ctx.fillStyle = powerUp.type === 'speed' ? '#00ff00' : 
                                   powerUp.type === 'magnet' ? '#ff6600' : '#0066ff';
                    ctx.beginPath();
                    ctx.arc(powerUp.x + powerUp.size/2, powerUp.y + powerUp.size/2, pulseSize/2, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Ø±Ø³Ù… Ø§Ù„Ø±Ù…Ø²
                    ctx.fillStyle = '#fff';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    const symbol = powerUp.type === 'speed' ? 'âš¡' : 
                                  powerUp.type === 'magnet' ? 'ğŸ§²' : 'â°';
                    ctx.fillText(symbol, powerUp.x + powerUp.size/2, powerUp.y + powerUp.size/2 + 6);
                    
                    ctx.restore();
                }
            });

            // Ø±Ø³Ù… Ø£Ø«Ø± Ø§Ù„Ø­Ø±ÙƒØ©
            drawTrails();

            // Ø±Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨
            drawCharacter(player.x, player.y, player.size, 'player');

            // Ø±Ø³Ù… Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©
            if (gameState === 'hugging') {
                // Ø±Ø³Ù… Ø§Ù„Ø§Ø­ØªØ¶Ø§Ù† Ù…Ø¹ ØªØ£Ø«ÙŠØ± Ø®Ø§Øµ
                ctx.save();
                ctx.shadowColor = '#ff69b4';
                ctx.shadowBlur = 30;
                drawCharacter(beloved.x, beloved.y, beloved.size, 'beloved', true);
                ctx.restore();
                
                // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø­Ø¨ Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©
                const loveMessages = [
                    'ğŸ’• Ø£Ø­Ø¨Ùƒ ÙƒØ«ÙŠØ±Ø§Ù‹! ğŸ’•',
                    'ğŸ’– Ø£Ù†Øª Ø­ÙŠØ§ØªÙŠ! ğŸ’–',
                    'ğŸ’— Ù‚Ù„Ø¨ÙŠ ÙŠÙ†Ø¨Ø¶ Ù„Ùƒ! ğŸ’—',
                    'ğŸ’ Ø£Ù†Øª ÙƒÙ„ Ø´ÙŠØ¡! ğŸ’'
                ];
                const messageIndex = Math.floor(hugTimer / 30) % loveMessages.length;
                
                ctx.save();
                ctx.fillStyle = '#d63384';
                ctx.font = 'bold 18px Arial';
                ctx.textAlign = 'center';
                ctx.shadowColor = '#fff';
                ctx.shadowBlur = 5;
                ctx.fillText(loveMessages[messageIndex], canvas.width/2, 30);
                ctx.restore();
            } else if (gameState === 'levelComplete') {
                // Ø±Ø³Ù… Ø±Ø³Ø§Ù„Ø© Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                ctx.save();
                ctx.fillStyle = '#ffd700';
                ctx.font = 'bold 20px Arial';
                ctx.textAlign = 'center';
                ctx.shadowColor = '#000';
                ctx.shadowBlur = 3;
                ctx.fillText(`ğŸ‰ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${gameLevel - 1} Ù…ÙƒØªÙ…Ù„! ğŸ‰`, canvas.width/2, canvas.height/2);
                ctx.fillText(`Ø§Ø³ØªØ¹Ø¯ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${gameLevel}!`, canvas.width/2, canvas.height/2 + 30);
                ctx.restore();
            } else {
                drawCharacter(beloved.x, beloved.y, beloved.size, 'beloved');
            }

            // Ø±Ø³Ù… Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª
            particles.forEach(particle => {
                ctx.save();
                ctx.globalAlpha = particle.opacity;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
                ctx.fill();
                ctx.restore();
            });

            // Ø±Ø³Ù… Ø§Ù„Ù‚Ù„ÙˆØ¨ Ø§Ù„Ù…ØªØ·Ø§ÙŠØ±Ø©
            hearts.forEach(heart => {
                ctx.save();
                ctx.globalAlpha = heart.opacity;
                ctx.translate(heart.x, heart.y);
                ctx.rotate(heart.rotation * Math.PI / 180);
                ctx.fillStyle = '#ff1493';
                ctx.font = heart.size + 'px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('ğŸ’–', 0, 0);
                ctx.restore();
            });

            // Ø±Ø³Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
            if (gameState === 'playing') {
                ctx.fillStyle = '#666';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                
                if (gameLevel === 1 && hugCount === 0) {
                    ctx.fillText('Ø§Ø¬Ø±ÙŠ ÙˆØ±Ø§Ø¡ Ø­Ø¨ÙŠØ¨ØªÙƒ Ù„ØªØ­ØªØ¶Ù†Ù‡Ø§! ğŸ’•', canvas.width/2, canvas.height - 25);
                    ctx.fillText('ØªØ¬Ù†Ø¨ Ø§Ù„Ø¹ÙˆØ§Ø¦Ù‚ ÙˆØ§Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙˆÙ‰ Ø§Ù„Ø®Ø§ØµØ©! âš¡', canvas.width/2, canvas.height - 10);
                } else {
                    ctx.fillText(`Ø§Ø­ØªØ¶Ù† Ø­Ø¨ÙŠØ¨ØªÙƒ ${gameLevel * 3 - hugCount} Ù…Ø±Ø§Øª Ø£Ø®Ø±Ù‰ Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙ‰!`, canvas.width/2, canvas.height - 10);
                }
            }

            ctx.restore(); // Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ù…Ù† Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø²
        }

        function drawTrails() {
            // Ø±Ø³Ù… Ø£Ø«Ø± Ø§Ù„Ù„Ø§Ø¹Ø¨
            player.trail.forEach((point, index) => {
                if (point.opacity > 0) {
                    ctx.save();
                    ctx.globalAlpha = point.opacity * 0.6;
                    ctx.fillStyle = '#4a90e2';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 3 + index * 0.5, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            });

            // Ø±Ø³Ù… Ø£Ø«Ø± Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©
            beloved.trail.forEach((point, index) => {
                if (point.opacity > 0) {
                    ctx.save();
                    ctx.globalAlpha = point.opacity * 0.5;
                    ctx.fillStyle = '#ff69b4';
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 2 + index * 0.3, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                }
            });
        }

        function gameLoop() {
            if (!gameRunning) return;
            
            updateGame();
            drawGame();
            requestAnimationFrame(gameLoop);
        }

        function restartGame() {
            if (gameRunning) {
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª
                player = { x: 50, y: 125, size: 40, speed: 4, trail: [] };
                beloved = { x: 300, y: 125, size: 40, speed: 2.5, trail: [] };
                hearts = [];
                particles = [];
                obstacles = [];
                powerUps = [];
                hugTimer = 0;
                gameLevel = 1;
                gameScore = 0;
                hugCount = 0;
                timeLeft = 30;
                cameraShake = 0;
                gameState = 'playing';
                mobileControls = { up: false, down: false, left: false, right: false };
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªÙˆÙ‰
                createLevel(gameLevel);
                
                // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø¤Ù‚Øª
                startGameTimer();
                
                // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                updateGameUI();
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97b76535b7d783a9',t:'MTc1NzI2MDU3OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
